########################################################################
# Control and Status Register [0]

record(bo, "$(P)$(R)enable") {
  field(DESC, "EVR enable")
  field(DTYP, "stream")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(OUT, "@timing.proto evre_ctrl_set($(P),$(R)) $(PORT)")
}

record(mbbiDirect, "$(P)$(R)enableRAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR enable status RAW")
  field(NOBT, "1")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_ctrl_enableRAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)enableRBV")
}

record(bi, "$(P)$(R)enableRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enableRAW.B0")
}

record(mbbiDirect, "$(P)$(R)linkinhs") {
  field(ASG, "Reserved")
  field(DESC, "EVR link and inhs status")
  field(NOBT, "8")
  field(SHFT, "6")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_ctrl_linkinhs_intr $(PORT)")
  field(FLNK, "$(P)$(R)inhs")
}

record(bi, "$(P)$(R)inhs") {
  field(ASG, "Reserved")
  field(DESC, "EVR interlock status")
  field(ZNAM, "DISSERTED")
  field(ONAM, "ASSERTED")
  field(INP, "$(P)$(R)linkinhs.B0")
  field(FLNK, "$(P)$(R)link")
}

record(bi, "$(P)$(R)link") {
  field(ASG, "Reserved")
  field(DESC, "EVR fibre link status")
  field(ZNAM, "UNLINK")
  field(ONAM, "LINK")
  field(INP, "$(P)$(R)linkinhs.B1")
}

record(longout, "$(P)$(R)cmd_ctrl_get") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read Ctrl Status reg")
  field(VAL, "0x80") # (0x80 | reg number)
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_ctrl_get($(P),$(R)) $(PORT)")
}

record(longout, "$(P)$(R)cmd_ctrl_set") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to Ctrl Status reg")
  field(VAL, "0x40") # (0x40 | reg number)
}

########################################################################
# OTP0 Register [1]

record(longout, "$(P)$(R)event0") {
  field(DESC, "EVR OTP0 event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),0) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime0RBV")
}

record(longout, "$(P)$(R)pulses0"){
  field(DESC, "EVR OTP0 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),0) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime0RBV")
}

record(longout, "$(P)$(R)width0") {
  field(DESC, "EVR OTP0 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),0) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime0RBV")
}

record(longout, "$(P)$(R)delay0") {
  field(DESC, "EVR OTP0 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),0) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime0RBV")
}

record(bo, "$(P)$(R)enable0") {
  field(DESC, "EVR OTP0 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE0")
}

record(bo, "$(P)$(R)pol0") {
  field(DESC, "EVR OTP0 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL0")
}

record(bo, "$(P)$(R)time0") {
  field(DESC, "EVR OTP0 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME0")
}

record(calcout, "$(P)$(R)ENABLE0") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable0.VAL")
  field(INPB, "$(P)$(R)pol0RBV.VAL")
  field(INPC, "$(P)$(R)time0RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),0,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime0")
}

record(calcout, "$(P)$(R)POL0") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable0RBV.VAL")
  field(INPB, "$(P)$(R)pol0.VAL")
  field(INPC, "$(P)$(R)time0RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),0,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime0")
}

record(calcout, "$(P)$(R)TIME0") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable0RBV.VAL")
  field(INPB, "$(P)$(R)pol0RBV.VAL")
  field(INPC, "$(P)$(R)time0.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),0,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime0")
}

record(calcout, "$(P)$(R)enpoltime0") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable0.VAL")
  field(INPB, "$(P)$(R)pol0.VAL")
  field(INPC, "$(P)$(R)time0.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime0RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP0 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime0RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time0RBV")
}

record(bi, "$(P)$(R)time0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime0RBV.B0")
  field(FLNK, "$(P)$(R)pol0RBV")
}

record(bi, "$(P)$(R)pol0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime0RBV.B1")
  field(FLNK, "$(P)$(R)enable0RBV")
}

record(bi, "$(P)$(R)enable0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime0RBV.B2")
}

record(longin, "$(P)$(R)pulses0RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 event RBV")
}

record(longin, "$(P)$(R)width0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP0 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set0") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP0")
  field(VAL, "0x41") # (0x40 | reg number=1)
}

record(longout, "$(P)$(R)cmd_otp_get0") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP0")
  field(VAL, "0x81") # (0x80 | reg number=1)
}

########################################################################
# OTP1 Register [2]

record(longout, "$(P)$(R)event1") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),1) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime1RBV")
}

record(longout, "$(P)$(R)pulses1"){
  field(DESC, "EVR OTP1 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),1) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime1RBV")
}

record(longout, "$(P)$(R)width1") {
  field(DESC, "EVR OTP1 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),1) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime1RBV")
}

record(longout, "$(P)$(R)delay1") {
  field(DESC, "EVR OTP1 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),1) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime1RBV")
}

record(bo, "$(P)$(R)enable1") {
  field(DESC, "EVR OTP1 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE1")
}

record(bo, "$(P)$(R)pol1") {
  field(DESC, "EVR OTP1 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL1")
}

record(bo, "$(P)$(R)time1") {
  field(DESC, "EVR OTP1 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME1")
}

record(calcout, "$(P)$(R)ENABLE1") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable1.VAL")
  field(INPB, "$(P)$(R)pol1RBV.VAL")
  field(INPC, "$(P)$(R)time1RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),1,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime1")
}

record(calcout, "$(P)$(R)POL1") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable1RBV.VAL")
  field(INPB, "$(P)$(R)pol1.VAL")
  field(INPC, "$(P)$(R)time1RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),1,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime1")
}

record(calcout, "$(P)$(R)TIME1") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable1RBV.VAL")
  field(INPB, "$(P)$(R)pol1RBV.VAL")
  field(INPC, "$(P)$(R)time1.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),1,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime1")
}

record(calcout, "$(P)$(R)enpoltime1") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable1.VAL")
  field(INPB, "$(P)$(R)pol1.VAL")
  field(INPC, "$(P)$(R)time1.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime1RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP1 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime1RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time1RBV")
}

record(bi, "$(P)$(R)time1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime1RBV.B0")
  field(FLNK, "$(P)$(R)pol1RBV")
}

record(bi, "$(P)$(R)pol1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime1RBV.B1")
  field(FLNK, "$(P)$(R)enable1RBV")
}

record(bi, "$(P)$(R)enable1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime1RBV.B2")
}

record(longin, "$(P)$(R)pulses1RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 event RBV")
}

record(longin, "$(P)$(R)width1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP1 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set1") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP1")
  field(VAL, "0x42") # (0x40 | reg number=2)
}

record(longout, "$(P)$(R)cmd_otp_get1") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP1")
  field(VAL, "0x82") # (0x80 | reg number=2)
}

########################################################################
# OTP2 Register [3]

record(longout, "$(P)$(R)event2") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),2) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime2RBV")
}

record(longout, "$(P)$(R)pulses2"){
  field(DESC, "EVR OTP2 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),2) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime2RBV")
}

record(longout, "$(P)$(R)width2") {
  field(DESC, "EVR OTP2 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),2) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime2RBV")
}

record(longout, "$(P)$(R)delay2") {
  field(DESC, "EVR OTP2 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),2) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime2RBV")
}

record(bo, "$(P)$(R)enable2") {
  field(DESC, "EVR OTP2 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE2")
}

record(bo, "$(P)$(R)pol2") {
  field(DESC, "EVR OTP2 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL2")
}

record(bo, "$(P)$(R)time2") {
  field(DESC, "EVR OTP2 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME2")
}

record(calcout, "$(P)$(R)ENABLE2") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable2.VAL")
  field(INPB, "$(P)$(R)pol2RBV.VAL")
  field(INPC, "$(P)$(R)time2RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),2,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime2")
}

record(calcout, "$(P)$(R)POL2") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable2RBV.VAL")
  field(INPB, "$(P)$(R)pol2.VAL")
  field(INPC, "$(P)$(R)time2RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),2,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime2")
}

record(calcout, "$(P)$(R)TIME2") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable2RBV.VAL")
  field(INPB, "$(P)$(R)pol2RBV.VAL")
  field(INPC, "$(P)$(R)time2.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),2,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime2")
}

record(calcout, "$(P)$(R)enpoltime2") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable2.VAL")
  field(INPB, "$(P)$(R)pol2.VAL")
  field(INPC, "$(P)$(R)time2.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime2RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP2 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime2RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time2RBV")
}

record(bi, "$(P)$(R)time2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime2RBV.B0")
  field(FLNK, "$(P)$(R)pol2RBV")
}

record(bi, "$(P)$(R)pol2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime2RBV.B1")
  field(FLNK, "$(P)$(R)enable2RBV")
}

record(bi, "$(P)$(R)enable2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime2RBV.B2")
}

record(longin, "$(P)$(R)pulses2RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 event RBV")
}

record(longin, "$(P)$(R)width2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP2 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set2") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP2")
  field(VAL, "0x43") # (0x40 | reg number=3)
}

record(longout, "$(P)$(R)cmd_otp_get2") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP2")
  field(VAL, "0x83") # (0x80 | reg number=3)
}

########################################################################
# OTP3 Register [4]

record(longout, "$(P)$(R)event3") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),3) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime3RBV")
}

record(longout, "$(P)$(R)pulses3"){
  field(DESC, "EVR OTP3 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),3) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime3RBV")
}

record(longout, "$(P)$(R)width3") {
  field(DESC, "EVR OTP3 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),3) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime3RBV")
}

record(longout, "$(P)$(R)delay3") {
  field(DESC, "EVR OTP3 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),3) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime3RBV")
}

record(bo, "$(P)$(R)enable3") {
  field(DESC, "EVR OTP3 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE3")
}

record(bo, "$(P)$(R)pol3") {
  field(DESC, "EVR OTP3 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL3")
}

record(bo, "$(P)$(R)time3") {
  field(DESC, "EVR OTP3 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME3")
}

record(calcout, "$(P)$(R)ENABLE3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable3.VAL")
  field(INPB, "$(P)$(R)pol3RBV.VAL")
  field(INPC, "$(P)$(R)time3RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),3,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime3")
}

record(calcout, "$(P)$(R)POL3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable3RBV.VAL")
  field(INPB, "$(P)$(R)pol3.VAL")
  field(INPC, "$(P)$(R)time3RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),3,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime3")
}

record(calcout, "$(P)$(R)TIME3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable3RBV.VAL")
  field(INPB, "$(P)$(R)pol3RBV.VAL")
  field(INPC, "$(P)$(R)time3.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),3,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime3")
}

record(calcout, "$(P)$(R)enpoltime3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable3.VAL")
  field(INPB, "$(P)$(R)pol3.VAL")
  field(INPC, "$(P)$(R)time3.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime3RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP3 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime3RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time3RBV")
}

record(bi, "$(P)$(R)time3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime3RBV.B0")
  field(FLNK, "$(P)$(R)pol3RBV")
}

record(bi, "$(P)$(R)pol3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime3RBV.B1")
  field(FLNK, "$(P)$(R)enable3RBV")
}

record(bi, "$(P)$(R)enable3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime3RBV.B2")
}

record(longin, "$(P)$(R)pulses3RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 event RBV")
}

record(longin, "$(P)$(R)width3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP3 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set3") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP3")
  field(VAL, "0x44") # (0x40 | reg number=4)
}

record(longout, "$(P)$(R)cmd_otp_get3") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP3")
  field(VAL, "0x84") # (0x80 | reg number=4)
}

########################################################################
# OTP4 Register [5]

record(longout, "$(P)$(R)event4") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),4) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime4RBV")
}

record(longout, "$(P)$(R)pulses4"){
  field(DESC, "EVR OTP4 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),4) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime4RBV")
}

record(longout, "$(P)$(R)width4") {
  field(DESC, "EVR OTP4 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),4) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime4RBV")
}

record(longout, "$(P)$(R)delay4") {
  field(DESC, "EVR OTP4 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),4) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime4RBV")
}

record(bo, "$(P)$(R)enable4") {
  field(DESC, "EVR OTP4 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE4")
}

record(bo, "$(P)$(R)pol4") {
  field(DESC, "EVR OTP4 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL4")
}

record(bo, "$(P)$(R)time4") {
  field(DESC, "EVR OTP4 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME4")
}

record(calcout, "$(P)$(R)ENABLE4") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable4.VAL")
  field(INPB, "$(P)$(R)pol4RBV.VAL")
  field(INPC, "$(P)$(R)time4RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),4,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime4")
}

record(calcout, "$(P)$(R)POL4") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable4RBV.VAL")
  field(INPB, "$(P)$(R)pol4.VAL")
  field(INPC, "$(P)$(R)time4RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),4,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime4")
}

record(calcout, "$(P)$(R)TIME4") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable4RBV.VAL")
  field(INPB, "$(P)$(R)pol4RBV.VAL")
  field(INPC, "$(P)$(R)time4.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),4,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime4")
}

record(calcout, "$(P)$(R)enpoltime4") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable4.VAL")
  field(INPB, "$(P)$(R)pol4.VAL")
  field(INPC, "$(P)$(R)time4.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime4RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP4 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime4RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time4RBV")
}

record(bi, "$(P)$(R)time4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime4RBV.B0")
  field(FLNK, "$(P)$(R)pol4RBV")
}

record(bi, "$(P)$(R)pol4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime4RBV.B1")
  field(FLNK, "$(P)$(R)enable4RBV")
}

record(bi, "$(P)$(R)enable4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime4RBV.B2")
}

record(longin, "$(P)$(R)pulses4RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 event RBV")
}

record(longin, "$(P)$(R)width4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP4 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set4") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP4")
  field(VAL, "0x45") # (0x40 | reg number=5)
}

record(longout, "$(P)$(R)cmd_otp_get4") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP4")
  field(VAL, "0x85") # (0x80 | reg number=5)
}

########################################################################
# OTP5 Register [6]

record(longout, "$(P)$(R)event5") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),5) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime5RBV")
}

record(longout, "$(P)$(R)pulses5"){
  field(DESC, "EVR OTP5 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),5) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime5RBV")
}

record(longout, "$(P)$(R)width5") {
  field(DESC, "EVR OTP5 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),5) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime5RBV")
}

record(longout, "$(P)$(R)delay5") {
  field(DESC, "EVR OTP5 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),5) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime5RBV")
}

record(bo, "$(P)$(R)enable5") {
  field(DESC, "EVR OTP5 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE5")
}

record(bo, "$(P)$(R)pol5") {
  field(DESC, "EVR OTP5 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL5")
}

record(bo, "$(P)$(R)time5") {
  field(DESC, "EVR OTP5 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME5")
}

record(calcout, "$(P)$(R)ENABLE5") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable5.VAL")
  field(INPB, "$(P)$(R)pol5RBV.VAL")
  field(INPC, "$(P)$(R)time5RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),5,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime5")
}

record(calcout, "$(P)$(R)POL5") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable5RBV.VAL")
  field(INPB, "$(P)$(R)pol5.VAL")
  field(INPC, "$(P)$(R)time5RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),5,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime5")
}

record(calcout, "$(P)$(R)TIME5") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable5RBV.VAL")
  field(INPB, "$(P)$(R)pol5RBV.VAL")
  field(INPC, "$(P)$(R)time5.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),5,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime5")
}

record(calcout, "$(P)$(R)enpoltime5") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable5.VAL")
  field(INPB, "$(P)$(R)pol5.VAL")
  field(INPC, "$(P)$(R)time5.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime5RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP5 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime5RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time5RBV")
}

record(bi, "$(P)$(R)time5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime5RBV.B0")
  field(FLNK, "$(P)$(R)pol5RBV")
}

record(bi, "$(P)$(R)pol5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime5RBV.B1")
  field(FLNK, "$(P)$(R)enable5RBV")
}

record(bi, "$(P)$(R)enable5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime5RBV.B2")
}

record(longin, "$(P)$(R)pulses5RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 event RBV")
}

record(longin, "$(P)$(R)width5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP5 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set5") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP5")
  field(VAL, "0x46") # (0x40 | reg number=6)
}

record(longout, "$(P)$(R)cmd_otp_get5") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP5")
  field(VAL, "0x86") # (0x80 | reg number=6)
}

########################################################################
# OTP6 Register [7]

record(longout, "$(P)$(R)event6") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),6) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime6RBV")
}

record(longout, "$(P)$(R)pulses6"){
  field(DESC, "EVR OTP6 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),6) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime6RBV")
}

record(longout, "$(P)$(R)width6") {
  field(DESC, "EVR OTP6 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),6) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime6RBV")
}

record(longout, "$(P)$(R)delay6") {
  field(DESC, "EVR OTP6 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),6) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime6RBV")
}

record(bo, "$(P)$(R)enable6") {
  field(DESC, "EVR OTP6 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE6")
}

record(bo, "$(P)$(R)pol6") {
  field(DESC, "EVR OTP6 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL6")
}

record(bo, "$(P)$(R)time6") {
  field(DESC, "EVR OTP6 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME6")
}

record(calcout, "$(P)$(R)ENABLE6") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable6.VAL")
  field(INPB, "$(P)$(R)pol6RBV.VAL")
  field(INPC, "$(P)$(R)time6RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),6,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime6")
}

record(calcout, "$(P)$(R)POL6") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable6RBV.VAL")
  field(INPB, "$(P)$(R)pol6.VAL")
  field(INPC, "$(P)$(R)time6RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),6,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime6")
}

record(calcout, "$(P)$(R)TIME6") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable6RBV.VAL")
  field(INPB, "$(P)$(R)pol6RBV.VAL")
  field(INPC, "$(P)$(R)time6.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),6,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime6")
}

record(calcout, "$(P)$(R)enpoltime6") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable6.VAL")
  field(INPB, "$(P)$(R)pol6.VAL")
  field(INPC, "$(P)$(R)time6.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime6RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP6 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime6RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time6RBV")
}

record(bi, "$(P)$(R)time6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime6RBV.B0")
  field(FLNK, "$(P)$(R)pol6RBV")
}

record(bi, "$(P)$(R)pol6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime6RBV.B1")
  field(FLNK, "$(P)$(R)enable6RBV")
}

record(bi, "$(P)$(R)enable6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime6RBV.B2")
}

record(longin, "$(P)$(R)pulses6RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 event RBV")
}

record(longin, "$(P)$(R)width6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP6 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set6") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP6")
  field(VAL, "0x47") # (0x40 | reg number=7)
}

record(longout, "$(P)$(R)cmd_otp_get6") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP6")
  field(VAL, "0x87") # (0x80 | reg number=7)
}

########################################################################
# OTP7 Register [8]

record(longout, "$(P)$(R)event7") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),7) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime7RBV")
}

record(longout, "$(P)$(R)pulses7"){
  field(DESC, "EVR OTP7 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),7) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime7RBV")
}

record(longout, "$(P)$(R)width7") {
  field(DESC, "EVR OTP7 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),7) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime7RBV")
}

record(longout, "$(P)$(R)delay7") {
  field(DESC, "EVR OTP7 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),7) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime7RBV")
}

record(bo, "$(P)$(R)enable7") {
  field(DESC, "EVR OTP7 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE7")
}

record(bo, "$(P)$(R)pol7") {
  field(DESC, "EVR OTP7 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL7")
}

record(bo, "$(P)$(R)time7") {
  field(DESC, "EVR OTP7 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME7")
}

record(calcout, "$(P)$(R)ENABLE7") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable7.VAL")
  field(INPB, "$(P)$(R)pol7RBV.VAL")
  field(INPC, "$(P)$(R)time7RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),7,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime7")
}

record(calcout, "$(P)$(R)POL7") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable7RBV.VAL")
  field(INPB, "$(P)$(R)pol7.VAL")
  field(INPC, "$(P)$(R)time7RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),7,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime7")
}

record(calcout, "$(P)$(R)TIME7") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable7RBV.VAL")
  field(INPB, "$(P)$(R)pol7RBV.VAL")
  field(INPC, "$(P)$(R)time7.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),7,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime7")
}

record(calcout, "$(P)$(R)enpoltime7") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable7.VAL")
  field(INPB, "$(P)$(R)pol7.VAL")
  field(INPC, "$(P)$(R)time7.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime7RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP7 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime7RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time7RBV")
}

record(bi, "$(P)$(R)time7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime7RBV.B0")
  field(FLNK, "$(P)$(R)pol7RBV")
}

record(bi, "$(P)$(R)pol7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime7RBV.B1")
  field(FLNK, "$(P)$(R)enable7RBV")
}

record(bi, "$(P)$(R)enable7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime7RBV.B2")
}

record(longin, "$(P)$(R)pulses7RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 event RBV")
}

record(longin, "$(P)$(R)width7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP7 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set7") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP7")
  field(VAL, "0x48") # (0x40 | reg number=8)
}

record(longout, "$(P)$(R)cmd_otp_get7") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP7")
  field(VAL, "0x88") # (0x80 | reg number=8)
}

########################################################################
# OTP8 Register [9]

record(longout, "$(P)$(R)event8") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),8) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime8RBV")
}

record(longout, "$(P)$(R)pulses8"){
  field(DESC, "EVR OTP8 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),8) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime8RBV")
}

record(longout, "$(P)$(R)width8") {
  field(DESC, "EVR OTP8 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),8) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime8RBV")
}

record(longout, "$(P)$(R)delay8") {
  field(DESC, "EVR OTP8 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),8) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime8RBV")
}

record(bo, "$(P)$(R)enable8") {
  field(DESC, "EVR OTP8 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE8")
}

record(bo, "$(P)$(R)pol8") {
  field(DESC, "EVR OTP8 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL8")
}

record(bo, "$(P)$(R)time8") {
  field(DESC, "EVR OTP8 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME8")
}

record(calcout, "$(P)$(R)ENABLE8") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable8.VAL")
  field(INPB, "$(P)$(R)pol8RBV.VAL")
  field(INPC, "$(P)$(R)time8RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),8,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime8")
}

record(calcout, "$(P)$(R)POL8") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable8RBV.VAL")
  field(INPB, "$(P)$(R)pol8.VAL")
  field(INPC, "$(P)$(R)time8RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),8,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime8")
}

record(calcout, "$(P)$(R)TIME8") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable8RBV.VAL")
  field(INPB, "$(P)$(R)pol8RBV.VAL")
  field(INPC, "$(P)$(R)time8.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),8,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime8")
}

record(calcout, "$(P)$(R)enpoltime8") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable8.VAL")
  field(INPB, "$(P)$(R)pol8.VAL")
  field(INPC, "$(P)$(R)time8.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime8RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP8 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime8RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time8RBV")
}

record(bi, "$(P)$(R)time8RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime8RBV.B0")
  field(FLNK, "$(P)$(R)pol8RBV")
}

record(bi, "$(P)$(R)pol8RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime8RBV.B1")
  field(FLNK, "$(P)$(R)enable8RBV")
}

record(bi, "$(P)$(R)enable8RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime8RBV.B2")
}

record(longin, "$(P)$(R)pulses8RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 number of pulses RBV")
}

record(longin, "$(P)$(R)event8RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 event RBV")
}

record(longin, "$(P)$(R)width8RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay8RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP8 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set8") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP8")
  field(VAL, "0x49") # (0x40 | reg number=9)
}

record(longout, "$(P)$(R)cmd_otp_get8") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP8")
  field(VAL, "0x89") # (0x80 | reg number=9)
}

########################################################################
# OTP9 Register [10]

record(longout, "$(P)$(R)event9") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),9) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime9RBV")
}

record(longout, "$(P)$(R)pulses9"){
  field(DESC, "EVR OTP9 number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),9) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime9RBV")
}

record(longout, "$(P)$(R)width9") {
  field(DESC, "EVR OTP9 event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),9) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime9RBV")
}

record(longout, "$(P)$(R)delay9") {
  field(DESC, "EVR OTP9 event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),9) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime9RBV")
}

record(bo, "$(P)$(R)enable9") {
  field(DESC, "EVR OTP9 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLE9")
}

record(bo, "$(P)$(R)pol9") {
  field(DESC, "EVR OTP9 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POL9")
}

record(bo, "$(P)$(R)time9") {
  field(DESC, "EVR OTP9 event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIME9")
}

record(calcout, "$(P)$(R)ENABLE9") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable9.VAL")
  field(INPB, "$(P)$(R)pol9RBV.VAL")
  field(INPC, "$(P)$(R)time9RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),9,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime9")
}

record(calcout, "$(P)$(R)POL9") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable9RBV.VAL")
  field(INPB, "$(P)$(R)pol9.VAL")
  field(INPC, "$(P)$(R)time9RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),9,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime9")
}

record(calcout, "$(P)$(R)TIME9") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enable9RBV.VAL")
  field(INPB, "$(P)$(R)pol9RBV.VAL")
  field(INPC, "$(P)$(R)time9.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),9,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltime9")
}

record(calcout, "$(P)$(R)enpoltime9") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enable9.VAL")
  field(INPB, "$(P)$(R)pol9.VAL")
  field(INPC, "$(P)$(R)time9.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltime9RBV") {
  field(ASG, "Reserved")
  field(DESC, "OTP9 enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltime9RBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)time9RBV")
}

record(bi, "$(P)$(R)time9RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltime9RBV.B0")
  field(FLNK, "$(P)$(R)pol9RBV")
}

record(bi, "$(P)$(R)pol9RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltime9RBV.B1")
  field(FLNK, "$(P)$(R)enable9RBV")
}

record(bi, "$(P)$(R)enable9RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltime9RBV.B2")
}

record(longin, "$(P)$(R)pulses9RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)event9RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 event RBV")
}

record(longin, "$(P)$(R)width9RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delay9RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTP9 delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_set9") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTP9")
  field(VAL, "0x4A") # (0x40 | reg number=10)
}

record(longout, "$(P)$(R)cmd_otp_get9") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTP9")
  field(VAL, "0x8A") # (0x80 | reg number=10)
}

########################################################################
# OTPA Register [11]

record(longout, "$(P)$(R)eventA") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),A) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeARBV")
}

record(longout, "$(P)$(R)pulsesA"){
  field(DESC, "EVR OTPA number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),A) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeARBV")
}

record(longout, "$(P)$(R)widthA") {
  field(DESC, "EVR OTPA event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),A) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeARBV")
}

record(longout, "$(P)$(R)delayA") {
  field(DESC, "EVR OTPA event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),A) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeARBV")
}

record(bo, "$(P)$(R)enableA") {
  field(DESC, "EVR OTPA enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLEA")
}

record(bo, "$(P)$(R)polA") {
  field(DESC, "EVR OTPB polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POLA")
}

record(bo, "$(P)$(R)timeA") {
  field(DESC, "EVR OTPA event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIMEA")
}

record(calcout, "$(P)$(R)ENABLEA") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableA.VAL")
  field(INPB, "$(P)$(R)polARBV.VAL")
  field(INPC, "$(P)$(R)timeARBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),A,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeA")
}

record(calcout, "$(P)$(R)POLA") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableARBV.VAL")
  field(INPB, "$(P)$(R)polA.VAL")
  field(INPC, "$(P)$(R)timeARBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),A,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeA")
}

record(calcout, "$(P)$(R)TIMEA") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableARBV.VAL")
  field(INPB, "$(P)$(R)polARBV.VAL")
  field(INPC, "$(P)$(R)timeA.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),A,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeA")
}

record(calcout, "$(P)$(R)enpoltimeA") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enableA.VAL")
  field(INPB, "$(P)$(R)polA.VAL")
  field(INPC, "$(P)$(R)timeA.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltimeARBV") {
  field(ASG, "Reserved")
  field(DESC, "OTPA enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltimeARBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)timeARBV")
}

record(bi, "$(P)$(R)timeARBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltimeARBV.B0")
  field(FLNK, "$(P)$(R)polARBV")
}

record(bi, "$(P)$(R)polARBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltimeARBV.B1")
  field(FLNK, "$(P)$(R)enableARBV")
}

record(bi, "$(P)$(R)enableARBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltimeARBV.B2")
}

record(longin, "$(P)$(R)pulsesARBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)eventARBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA event RBV")
}

record(longin, "$(P)$(R)widthARBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delayARBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPA delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_setA") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTPA")
  field(VAL, "0x4B") # (0x40 | reg number=11)
}

record(longout, "$(P)$(R)cmd_otp_getA") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTPA")
  field(VAL, "0x8B") # (0x80 | reg number=11)
}

########################################################################
# OTPB Register [12]

record(longout, "$(P)$(R)eventB") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),B) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeBRBV")
}

record(longout, "$(P)$(R)pulsesB"){
  field(DESC, "EVR OTPB number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),B) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeBRBV")
}

record(longout, "$(P)$(R)widthB") {
  field(DESC, "EVR OTPB event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),B) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeBRBV")
}

record(longout, "$(P)$(R)delayB") {
  field(DESC, "EVR OTPB event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),B) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeBRBV")
}

record(bo, "$(P)$(R)enableB") {
  field(DESC, "EVR OTPB enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLEB")
}

record(bo, "$(P)$(R)polB") {
  field(DESC, "EVR OTPB polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POLB")
}

record(bo, "$(P)$(R)timeB") {
  field(DESC, "EVR OTPB event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIMEB")
}

record(calcout, "$(P)$(R)ENABLEB") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableB.VAL")
  field(INPB, "$(P)$(R)polBRBV.VAL")
  field(INPC, "$(P)$(R)timeBRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),B,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeB")
}

record(calcout, "$(P)$(R)POLB") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableBRBV.VAL")
  field(INPB, "$(P)$(R)polB.VAL")
  field(INPC, "$(P)$(R)timeBRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),B,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeB")
}

record(calcout, "$(P)$(R)TIMEB") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableBRBV.VAL")
  field(INPB, "$(P)$(R)polBRBV.VAL")
  field(INPC, "$(P)$(R)timeB.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),B,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeB")
}

record(calcout, "$(P)$(R)enpoltimeB") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enableB.VAL")
  field(INPB, "$(P)$(R)polB.VAL")
  field(INPC, "$(P)$(R)timeB.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltimeBRBV") {
  field(ASG, "Reserved")
  field(DESC, "OTPB enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltimeBRBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)timeBRBV")
}

record(bi, "$(P)$(R)timeBRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltimeBRBV.B0")
  field(FLNK, "$(P)$(R)polBRBV")
}

record(bi, "$(P)$(R)polBRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltimeBRBV.B1")
  field(FLNK, "$(P)$(R)enableBRBV")
}

record(bi, "$(P)$(R)enableBRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltimeBRBV.B2")
}

record(longin, "$(P)$(R)pulsesBRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)eventBRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB event RBV")
}

record(longin, "$(P)$(R)widthBRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delayBRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPB delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_setB") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTPB")
  field(VAL, "0x4C") # (0x40 | reg number=12)
}

record(longout, "$(P)$(R)cmd_otp_getB") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTPB")
  field(VAL, "0x8C") # (0x80 | reg number=12)
}

########################################################################
# OTPC Register [13]

record(longout, "$(P)$(R)eventC") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),C) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeCRBV")
}

record(longout, "$(P)$(R)pulsesC"){
  field(DESC, "EVR OTPC number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),C) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeCRBV")
}

record(longout, "$(P)$(R)widthC") {
  field(DESC, "EVR OTPC event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),C) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeCRBV")
}

record(longout, "$(P)$(R)delayC") {
  field(DESC, "EVR OTPC event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),C) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeCRBV")
}

record(bo, "$(P)$(R)enableC") {
  field(DESC, "EVR OTPC enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLEC")
}

record(bo, "$(P)$(R)polC") {
  field(DESC, "EVR OTPC polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POLC")
}

record(bo, "$(P)$(R)timeC") {
  field(DESC, "EVR OTPC event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIMEC")
}

record(calcout, "$(P)$(R)ENABLEC") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableC.VAL")
  field(INPB, "$(P)$(R)polCRBV.VAL")
  field(INPC, "$(P)$(R)timeCRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),C,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeC")
}

record(calcout, "$(P)$(R)POLC") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableCRBV.VAL")
  field(INPB, "$(P)$(R)polC.VAL")
  field(INPC, "$(P)$(R)timeCRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),C,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeC")
}

record(calcout, "$(P)$(R)TIMEC") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableCRBV.VAL")
  field(INPB, "$(P)$(R)polCRBV.VAL")
  field(INPC, "$(P)$(R)timeC.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),C,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeC")
}

record(calcout, "$(P)$(R)enpoltimeC") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enableC.VAL")
  field(INPB, "$(P)$(R)polC.VAL")
  field(INPC, "$(P)$(R)timeC.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltimeCRBV") {
  field(ASG, "Reserved")
  field(DESC, "OTPC enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltimeCRBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)timeCRBV")
}

record(bi, "$(P)$(R)timeCRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltimeCRBV.B0")
  field(FLNK, "$(P)$(R)polCRBV")
}

record(bi, "$(P)$(R)polCRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltimeCRBV.B1")
  field(FLNK, "$(P)$(R)enableCRBV")
}

record(bi, "$(P)$(R)enableCRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltimeCRBV.B2")
}

record(longin, "$(P)$(R)pulsesCRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)eventCRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC event RBV")
}

record(longin, "$(P)$(R)widthCRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delayCRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPC delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_setC") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTPC")
  field(VAL, "0x4D") # (0x40 | reg number=13)
}

record(longout, "$(P)$(R)cmd_otp_getC") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTPC")
  field(VAL, "0x8D") # (0x80 | reg number=13)
}

########################################################################
# OTPD Register [14]

record(longout, "$(P)$(R)eventD") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),D) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeDRBV")
}

record(longout, "$(P)$(R)pulsesD"){
  field(DESC, "EVR OTPD number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),D) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeDRBV")
}

record(longout, "$(P)$(R)widthD") {
  field(DESC, "EVR OTPD event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),D) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeDRBV")
}

record(longout, "$(P)$(R)delayD") {
  field(DESC, "EVR OTPD event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),D) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeDRBV")
}

record(bo, "$(P)$(R)enableD") {
  field(DESC, "EVR OTPD enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLED")
}

record(bo, "$(P)$(R)polD") {
  field(DESC, "EVR OTPD polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POLD")
}

record(bo, "$(P)$(R)timeD") {
  field(DESC, "EVR OTPD event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIMED")
}

record(calcout, "$(P)$(R)ENABLED") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableD.VAL")
  field(INPB, "$(P)$(R)polDRBV.VAL")
  field(INPC, "$(P)$(R)timeDRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),D,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeD")
}

record(calcout, "$(P)$(R)POLD") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableDRBV.VAL")
  field(INPB, "$(P)$(R)polD.VAL")
  field(INPC, "$(P)$(R)timeDRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),D,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeD")
}

record(calcout, "$(P)$(R)TIMED") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableDRBV.VAL")
  field(INPB, "$(P)$(R)polDRBV.VAL")
  field(INPC, "$(P)$(R)timeD.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),D,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeD")
}

record(calcout, "$(P)$(R)enpoltimeD") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enableD.VAL")
  field(INPB, "$(P)$(R)polD.VAL")
  field(INPC, "$(P)$(R)timeD.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltimeDRBV") {
  field(ASG, "Reserved")
  field(DESC, "OTPD enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltimeDRBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)timeDRBV")
}

record(bi, "$(P)$(R)timeDRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltimeDRBV.B0")
  field(FLNK, "$(P)$(R)polDRBV")
}

record(bi, "$(P)$(R)polDRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltimeDRBV.B1")
  field(FLNK, "$(P)$(R)enableDRBV")
}

record(bi, "$(P)$(R)enableDRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltimeDRBV.B2")
}

record(longin, "$(P)$(R)pulsesDRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)eventDRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD event RBV")
}

record(longin, "$(P)$(R)widthDRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delayDRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPD delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_setD") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTPD")
  field(VAL, "0x4E") # (0x40 | reg number=14)
}

record(longout, "$(P)$(R)cmd_otp_getD") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTPD")
  field(VAL, "0x8E") # (0x80 | reg number=14)
}

########################################################################
# OTPE Register [15]

record(longout, "$(P)$(R)eventE") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),E) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeERBV")
}

record(longout, "$(P)$(R)pulsesE"){
  field(DESC, "EVR OTPE number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),E) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeERBV")
}

record(longout, "$(P)$(R)widthE") {
  field(DESC, "EVR OTPE event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),E) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeERBV")
}

record(longout, "$(P)$(R)delayE") {
  field(DESC, "EVR OTPE event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),E) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeERBV")
}

record(bo, "$(P)$(R)enableE") {
  field(DESC, "EVR OTPE enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLEE")
}

record(bo, "$(P)$(R)polE") {
  field(DESC, "EVR OTPE polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POLE")
}

record(bo, "$(P)$(R)timeE") {
  field(DESC, "EVR OTPE event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIMEE")
}

record(calcout, "$(P)$(R)ENABLEE") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableE.VAL")
  field(INPB, "$(P)$(R)polERBV.VAL")
  field(INPC, "$(P)$(R)timeERBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),E,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeE")
}

record(calcout, "$(P)$(R)POLE") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableERBV.VAL")
  field(INPB, "$(P)$(R)polE.VAL")
  field(INPC, "$(P)$(R)timeERBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),E,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeE")
}

record(calcout, "$(P)$(R)TIMEE") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableERBV.VAL")
  field(INPB, "$(P)$(R)polERBV.VAL")
  field(INPC, "$(P)$(R)timeE.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),E,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeE")
}

record(calcout, "$(P)$(R)enpoltimeE") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enableE.VAL")
  field(INPB, "$(P)$(R)polE.VAL")
  field(INPC, "$(P)$(R)timeE.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltimeERBV") {
  field(ASG, "Reserved")
  field(DESC, "OTPE enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltimeERBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)timeERBV")
}

record(bi, "$(P)$(R)timeERBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltimeERBV.B0")
  field(FLNK, "$(P)$(R)polERBV")
}

record(bi, "$(P)$(R)polERBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltimeERBV.B1")
  field(FLNK, "$(P)$(R)enableERBV")
}

record(bi, "$(P)$(R)enableERBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltimeERBV.B2")
}

record(longin, "$(P)$(R)pulsesERBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)eventERBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE event RBV")
}

record(longin, "$(P)$(R)widthERBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delayERBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPE delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_setE") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTPE")
  field(VAL, "0x4F") # (0x40 | reg number=15)
}

record(longout, "$(P)$(R)cmd_otp_getE") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTPE")
  field(VAL, "0x8F") # (0x80 | reg number=15)
}

########################################################################
# OTPF Register [16]

record(longout, "$(P)$(R)eventF") {
  field(DESC, "EVR event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_ev_set($(P),$(R),F) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeFRBV")
}

record(longout, "$(P)$(R)pulsesF"){
  field(DESC, "EVR OTPF number of pulses")
  field(DRVH, "65535")
  field(DRVL, "1")
  field(EGU, "pulses")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_pulses_set($(P),$(R),F) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeFRBV")
}

record(longout, "$(P)$(R)widthF") {
  field(DESC, "EVR OTPF event width")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_width_set($(P),$(R),F) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeFRBV")
}

record(longout, "$(P)$(R)delayF") {
  field(DESC, "EVR OTPF event delay")
  field(EGU, "evt_T")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_otp_dly_set($(P),$(R),F) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeFRBV")
}

record(bo, "$(P)$(R)enableF") {
  field(DESC, "EVR OTPF enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ENABLEF")
}

record(bo, "$(P)$(R)polF") {
  field(DESC, "EVR OTPF polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)POLF")
}

record(bo, "$(P)$(R)timeF") {
  field(DESC, "EVR OTPF event timestamping enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)TIMEF")
}

record(calcout, "$(P)$(R)ENABLEF") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableF.VAL")
  field(INPB, "$(P)$(R)polFRBV.VAL")
  field(INPC, "$(P)$(R)timeFRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),F,ENABLE) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeF")
}

record(calcout, "$(P)$(R)POLF") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableFRBV.VAL")
  field(INPB, "$(P)$(R)polF.VAL")
  field(INPC, "$(P)$(R)timeFRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),F,POL) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeF")
}

record(calcout, "$(P)$(R)TIMEF") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF set timestamping calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)enableFRBV.VAL")
  field(INPB, "$(P)$(R)polFRBV.VAL")
  field(INPC, "$(P)$(R)timeF.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_otp_en_pol_time_set($(P),$(R),F,TIME) $(PORT)")
  field(FLNK, "$(P)$(R)enpoltimeF")
}

record(calcout, "$(P)$(R)enpoltimeF") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF download EN, POL, and TIME")
  field(INPA, "$(P)$(R)enableF.VAL")
  field(INPB, "$(P)$(R)polF.VAL")
  field(INPC, "$(P)$(R)timeF.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)enpoltimeFRBV") {
  field(ASG, "Reserved")
  field(DESC, "OTPF enable, polarity, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_otp_enpoltimeFRBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)timeFRBV")
}

record(bi, "$(P)$(R)timeFRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF timestamping status")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)enpoltimeFRBV.B0")
  field(FLNK, "$(P)$(R)polFRBV")
}

record(bi, "$(P)$(R)polFRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)enpoltimeFRBV.B1")
  field(FLNK, "$(P)$(R)enableFRBV")
}

record(bi, "$(P)$(R)enableFRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)enpoltimeFRBV.B2")
}

record(longin, "$(P)$(R)pulsesFRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF number of pulses RBV")
  field(EGU, "pulses")
}

record(longin, "$(P)$(R)eventFRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF event RBV")
}

record(longin, "$(P)$(R)widthFRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF width RBV")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)delayFRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OTPF delay RBV")
  field(EGU, "evt_T")
}

record(longout, "$(P)$(R)cmd_otp_setF") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OTPF")
  field(VAL, "0x50") # (0x40 | reg number=16)
}

record(longout, "$(P)$(R)cmd_otp_getF") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OTPF")
  field(VAL, "0x90") # (0x80 | reg number=16)
}

########################################################################
# OUT0 Register [17]

record(mbbiDirect, "$(P)$(R)itl0RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl0RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl0RBV")
}

record(bi, "$(P)$(R)itl0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl0RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel0RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel0RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel0StatCalc")
}

record(scalcout, "$(P)$(R)sel0StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 source selection status calc")
  field(INPA, "$(P)$(R)sel0RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel0RBV")
}

record(stringin, "$(P)$(R)sel0RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 source selection status")
  field(INP, "$(P)$(R)sel0StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly0"){
  field(DESC, "EVR OUT0 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),0) $(PORT)")
}

record(longout, "$(P)$(R)finedly0"){
  field(DESC, "EVR OUT0 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),0) $(PORT)")
}

record(stringout, "$(P)$(R)sel0"){
  field(DESC, "EVR OUT0 source selection")
  field(FLNK, "$(P)$(R)sel0Calc1")
}

record(scalcout, "$(P)$(R)sel0Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 source selection calc 1")
  field(INAA, "$(P)$(R)sel0.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel0Calc2")
}

record(scalcout, "$(P)$(R)sel0Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 source selection calc 2")
  field(INAA, "$(P)$(R)sel0.VAL")
  field(INPB, "$(P)$(R)sel0Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel0Calc3")
}

record(scalcout, "$(P)$(R)sel0Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 source selection calc 3")
  field(INAA, "$(P)$(R)sel0.VAL")
  field(INPB, "$(P)$(R)sel0Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel0toHW.VAL PP")
}

record(longout, "$(P)$(R)sel0toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),0) $(PORT)")
}

record(calcout, "$(P)$(R)ITL0") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT0 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl0")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),0) $(PORT)")
}

record(bo, "$(P)$(R)itl0"){
  field(DESC, "EVR OUT0 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL0")
}

record(longout, "$(P)$(R)cmd_out_get0") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT0")
  field(VAL, "0x91") # (0x80 | (reg number=17))
}

record(longout, "$(P)$(R)cmd_out_set0") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT0")
  field(VAL, "0x51")
}

########################################################################
# OUT1 Register [18]

record(mbbiDirect, "$(P)$(R)itl1RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl1RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl1RBV")
}

record(bi, "$(P)$(R)itl1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl1RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel1RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel1RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel1StatCalc")
}

record(scalcout, "$(P)$(R)sel1StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 source selection status calc")
  field(INPA, "$(P)$(R)sel1RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel1RBV")
}

record(stringin, "$(P)$(R)sel1RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 source selection status")
  field(INP, "$(P)$(R)sel1StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly1"){
  field(DESC, "EVR OUT1 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),1) $(PORT)")
}

record(longout, "$(P)$(R)finedly1"){
  field(DESC, "EVR OUT1 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),1) $(PORT)")
}

record(stringout, "$(P)$(R)sel1"){
  field(DESC, "EVR OUT1 source selection")
  field(FLNK, "$(P)$(R)sel1Calc1")
}

record(scalcout, "$(P)$(R)sel1Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 source selection calc 1")
  field(INAA, "$(P)$(R)sel1.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel1Calc2")
}

record(scalcout, "$(P)$(R)sel1Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 source selection calc 2")
  field(INAA, "$(P)$(R)sel1.VAL")
  field(INPB, "$(P)$(R)sel1Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel1Calc3")
}

record(scalcout, "$(P)$(R)sel1Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 source selection calc 3")
  field(INAA, "$(P)$(R)sel1.VAL")
  field(INPB, "$(P)$(R)sel1Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel1toHW.VAL PP")
}

record(longout, "$(P)$(R)sel1toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),1) $(PORT)")
}

record(calcout, "$(P)$(R)ITL1") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT1 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl1")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),1) $(PORT)")
}

record(bo, "$(P)$(R)itl1"){
  field(DESC, "EVR OUT1 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL1")
}

record(longout, "$(P)$(R)cmd_out_get1") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT1")
  field(VAL, "0x92") # (0x80 | (reg number=18))
}

record(longout, "$(P)$(R)cmd_out_set1") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT1")
  field(VAL, "0x52")
}

########################################################################
# OUT2 Register [19]

record(mbbiDirect, "$(P)$(R)itl2RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl2RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl2RBV")
}

record(bi, "$(P)$(R)itl2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl2RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel2RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel2RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel2StatCalc")
}

record(scalcout, "$(P)$(R)sel2StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 source selection status calc")
  field(INPA, "$(P)$(R)sel2RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel2RBV")
}

record(stringin, "$(P)$(R)sel2RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 source selection status")
  field(INP, "$(P)$(R)sel2StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly2"){
  field(DESC, "EVR OUT2 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),2) $(PORT)")
}

record(longout, "$(P)$(R)finedly2"){
  field(DESC, "EVR OUT2 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),2) $(PORT)")
}

record(stringout, "$(P)$(R)sel2"){
  field(DESC, "EVR OUT2 source selection")
  field(FLNK, "$(P)$(R)sel2Calc1")
}

record(scalcout, "$(P)$(R)sel2Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 source selection calc 1")
  field(INAA, "$(P)$(R)sel2.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel2Calc2")
}

record(scalcout, "$(P)$(R)sel2Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 source selection calc 2")
  field(INAA, "$(P)$(R)sel2.VAL")
  field(INPB, "$(P)$(R)sel2Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel2Calc3")
}

record(scalcout, "$(P)$(R)sel2Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 source selection calc 3")
  field(INAA, "$(P)$(R)sel2.VAL")
  field(INPB, "$(P)$(R)sel2Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel2toHW.VAL PP")
}

record(longout, "$(P)$(R)sel2toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),2) $(PORT)")
}

record(calcout, "$(P)$(R)ITL2") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT2 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl2")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),2) $(PORT)")
}

record(bo, "$(P)$(R)itl2"){
  field(DESC, "EVR OUT2 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL2")
}

record(longout, "$(P)$(R)cmd_out_get2") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT2")
  field(VAL, "0x93") # (0x80 | (reg number=19))
}

record(longout, "$(P)$(R)cmd_out_set2") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT2")
  field(VAL, "0x53")
}

########################################################################
# OUT3 Register [20]

record(mbbiDirect, "$(P)$(R)itl3RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl3RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl3RBV")
}

record(bi, "$(P)$(R)itl3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl3RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel3RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel3RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel3StatCalc")
}

record(scalcout, "$(P)$(R)sel3StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 source selection status calc")
  field(INPA, "$(P)$(R)sel3RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel3RBV")
}

record(stringin, "$(P)$(R)sel3RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 source selection status")
  field(INP, "$(P)$(R)sel3StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly3RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly3"){
  field(DESC, "EVR OUT3 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),3) $(PORT)")
}

record(longout, "$(P)$(R)finedly3"){
  field(DESC, "EVR OUT3 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),3) $(PORT)")
}

record(stringout, "$(P)$(R)sel3"){
  field(DESC, "EVR OUT3 source selection")
  field(FLNK, "$(P)$(R)sel3Calc1")
}

record(scalcout, "$(P)$(R)sel3Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 source selection calc 1")
  field(INAA, "$(P)$(R)sel3.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel3Calc2")
}

record(scalcout, "$(P)$(R)sel3Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 source selection calc 2")
  field(INAA, "$(P)$(R)sel3.VAL")
  field(INPB, "$(P)$(R)sel3Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel3Calc3")
}

record(scalcout, "$(P)$(R)sel3Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 source selection calc 3")
  field(INAA, "$(P)$(R)sel3.VAL")
  field(INPB, "$(P)$(R)sel3Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel3toHW PP")
}

record(longout, "$(P)$(R)sel3toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),3) $(PORT)")
}
record(calcout, "$(P)$(R)ITL3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT3 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl3")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),3) $(PORT)")
}

record(bo, "$(P)$(R)itl3"){
  field(DESC, "EVR OUT3 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL3")
}

record(longout, "$(P)$(R)cmd_out_get3") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT3")
  field(VAL, "0x94") # (0x80 | (reg number=20))
}

record(longout, "$(P)$(R)cmd_out_set3") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT3")
  field(VAL, "0x54")
}

########################################################################
# OUT4 Register [21]

record(mbbiDirect, "$(P)$(R)itl4RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl4RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl4RBV")
}

record(bi, "$(P)$(R)itl4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl4RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel4RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel4RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel4StatCalc")
}

record(scalcout, "$(P)$(R)sel4StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 source selection status calc")
  field(INPA, "$(P)$(R)sel4RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel4RBV")
}

record(stringin, "$(P)$(R)sel4RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 source selection status")
  field(INP, "$(P)$(R)sel4StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly4RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly4"){
  field(DESC, "EVR OUT4 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),4) $(PORT)")
}

record(longout, "$(P)$(R)finedly4"){
  field(DESC, "EVR OUT4 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),4) $(PORT)")
}

record(stringout, "$(P)$(R)sel4"){
  field(DESC, "EVR OUT4 source selection")
  field(FLNK, "$(P)$(R)sel4Calc1")
}

record(scalcout, "$(P)$(R)sel4Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 source selection calc 1")
  field(INAA, "$(P)$(R)sel4.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel4Calc2")
}

record(scalcout, "$(P)$(R)sel4Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 source selection calc 2")
  field(INAA, "$(P)$(R)sel4.VAL")
  field(INPB, "$(P)$(R)sel4Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel4Calc3")
}

record(scalcout, "$(P)$(R)sel4Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 source selection calc 3")
  field(INAA, "$(P)$(R)sel4.VAL")
  field(INPB, "$(P)$(R)sel4Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel4toHW PP")
}

record(longout, "$(P)$(R)sel4toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),4) $(PORT)")
}

record(calcout, "$(P)$(R)ITL4") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT4 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl4")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),4) $(PORT)")
}

record(bo, "$(P)$(R)itl4"){
  field(DESC, "EVR OUT4 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL4")
}

record(longout, "$(P)$(R)cmd_out_get4") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT4")
  field(VAL, "0x95") # (0x80 | (reg number=21))
}

record(longout, "$(P)$(R)cmd_out_set4") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT4")
  field(VAL, "0x55")
}

########################################################################
# OUT5 Register [22]

record(mbbiDirect, "$(P)$(R)itl5RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl5RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl5RBV")
}

record(bi, "$(P)$(R)itl5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl5RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel5RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel5RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel5StatCalc")
}

record(scalcout, "$(P)$(R)sel5StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 source selection status calc")
  field(INPA, "$(P)$(R)sel5RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel5RBV")
}

record(stringin, "$(P)$(R)sel5RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 source selection status")
  field(INP, "$(P)$(R)sel5StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly5RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly5"){
  field(DESC, "EVR OUT5 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),5) $(PORT)")
}

record(longout, "$(P)$(R)finedly5"){
  field(DESC, "EVR OUT5 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),5) $(PORT)")
}

record(stringout, "$(P)$(R)sel5"){
  field(DESC, "EVR OUT5 source selection")
  field(FLNK, "$(P)$(R)sel5Calc1")
}

record(scalcout, "$(P)$(R)sel5Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 source selection calc 1")
  field(INAA, "$(P)$(R)sel5.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel5Calc2")
}

record(scalcout, "$(P)$(R)sel5Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 source selection calc 2")
  field(INAA, "$(P)$(R)sel5.VAL")
  field(INPB, "$(P)$(R)sel5Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel5Calc3")
}

record(scalcout, "$(P)$(R)sel5Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 source selection calc 3")
  field(INAA, "$(P)$(R)sel5.VAL")
  field(INPB, "$(P)$(R)sel5Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel5toHW PP")
}

record(longout, "$(P)$(R)sel5toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),5) $(PORT)")
}

record(calcout, "$(P)$(R)ITL5") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT5 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl5")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),5) $(PORT)")
}

record(bo, "$(P)$(R)itl5"){
  field(DESC, "EVR OUT5 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL5")
}

record(longout, "$(P)$(R)cmd_out_get5") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT5")
  field(VAL, "0x96") # (0x80 | (reg number=22))
}

record(longout, "$(P)$(R)cmd_out_set5") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT5")
  field(VAL, "0x56")
}

########################################################################
# OUT6 Register [23]

record(mbbiDirect, "$(P)$(R)itl6RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl6RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl6RBV")
}

record(bi, "$(P)$(R)itl6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl6RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel6RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel6RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel6StatCalc")
}

record(scalcout, "$(P)$(R)sel6StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 source selection status calc")
  field(INPA, "$(P)$(R)sel6RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel6RBV")
}

record(stringin, "$(P)$(R)sel6RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 source selection status")
  field(INP, "$(P)$(R)sel6StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly6RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly6"){
  field(DESC, "EVR OUT6 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),6) $(PORT)")
}

record(longout, "$(P)$(R)finedly6"){
  field(DESC, "EVR OUT6 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),6) $(PORT)")
}

record(stringout, "$(P)$(R)sel6"){
  field(DESC, "EVR OUT6 source selection")
  field(FLNK, "$(P)$(R)sel6Calc1")
}

record(scalcout, "$(P)$(R)sel6Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 source selection calc 1")
  field(INAA, "$(P)$(R)sel6.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel6Calc2")
}

record(scalcout, "$(P)$(R)sel6Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 source selection calc 2")
  field(INAA, "$(P)$(R)sel6.VAL")
  field(INPB, "$(P)$(R)sel6Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel6Calc3")
}

record(scalcout, "$(P)$(R)sel6Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 source selection calc 3")
  field(INAA, "$(P)$(R)sel6.VAL")
  field(INPB, "$(P)$(R)sel6Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel6toHW PP")
}

record(longout, "$(P)$(R)sel6toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),6) $(PORT)")
}

record(calcout, "$(P)$(R)ITL6") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT6 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl6")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),6) $(PORT)")
}

record(bo, "$(P)$(R)itl6"){
  field(DESC, "EVR OUT6 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL6")
}

record(longout, "$(P)$(R)cmd_out_get6") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT6")
  field(VAL, "0x97") # (0x80 | (reg number=23))
}

record(longout, "$(P)$(R)cmd_out_set6") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT6")
  field(VAL, "0x57")
}

########################################################################
# OUT7 Register [24]

record(mbbiDirect, "$(P)$(R)itl7RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 interlock raw status")
  field(NOBT, "8")
  field(SHFT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_itl7RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)itl7RBV")
}

record(bi, "$(P)$(R)itl7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 interlock status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)itl7RAW.B0")
}

record(mbbiDirect, "$(P)$(R)sel7RAW") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 source selection status RAW")
  field(NOBT, "7")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_out_sel7RAW_intr $(PORT)")
  field(FLNK, "$(P)$(R)sel7StatCalc")
}

record(scalcout, "$(P)$(R)sel7StatCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 source selection status calc")
  field(INPA, "$(P)$(R)sel7RAW.VAL")
  field(CALC, "A > 31 ? printf('Dbus%d',A-32) : printf('OTP%d',A-16)")
  field(FLNK, "$(P)$(R)sel7RBV")
}

record(stringin, "$(P)$(R)sel7RBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 source selection status")
  field(INP, "$(P)$(R)sel7StatCalc.SVAL")
}

record(longin, "$(P)$(R)finedly7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 fine delay status")
  field(EGU, "5ps")
}

record(longin, "$(P)$(R)rfdly7RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 RF delay status")
  field(EGU, "evt_T/20")
}

record(longout, "$(P)$(R)rfdly7"){
  field(DESC, "EVR OUT7 RF delay")
  field(DRVL, "0")
  field(DRVH, "31")
  field(EGU, "evt_T/20")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_rfdly_set($(P),$(R),7) $(PORT)")
}

record(longout, "$(P)$(R)finedly7"){
  field(DESC, "EVR OUT7 fine delay")
  field(DRVL, "0")
  field(DRVH, "1023")
  field(EGU, "5ps")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_finedly_set($(P),$(R),7) $(PORT)")
}

record(stringout, "$(P)$(R)sel7"){
  field(DESC, "EVR OUT7 source selection")
  field(FLNK, "$(P)$(R)sel7Calc1")
}

record(scalcout, "$(P)$(R)sel7Calc1"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 source selection calc 1")
  field(INAA, "$(P)$(R)sel7.VAL")
  field(CALC, "AA[0,2]=='OTP'&&len(AA)=4&&(AA=='OTP0'||(DBL(AA)>0&&DBL(AA)<=9))")  
  field(FLNK, "$(P)$(R)sel7Calc2")
}

record(scalcout, "$(P)$(R)sel7Calc2"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 source selection calc 2")
  field(INAA, "$(P)$(R)sel7.VAL")
  field(INPB, "$(P)$(R)sel7Calc1.VAL")
  field(CALC, "B||(AA[0,2]=='OTP'&&len(AA)=5&&DBL(AA[-2,-1])>=10&&DBL(AA[-2,-1])<16)")  
  field(FLNK, "$(P)$(R)sel7Calc3")
}

record(scalcout, "$(P)$(R)sel7Calc3") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 source selection calc 3")
  field(INAA, "$(P)$(R)sel7.VAL")
  field(INPB, "$(P)$(R)sel7Calc2.VAL")
  field(CALC, "B||(len(AA)=5&&AA[0,3]=='Dbus'&&(AA=='Dbus0'||(DBL(AA)>0&&DBL(AA)<8)))")  
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "AA[0,2]=='OTP' ? 16+DBL(AA) : 32+DBL(AA)")
  field(OUT, "$(P)$(R)sel7toHW PP")
}

record(longout, "$(P)$(R)sel7toHW"){
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 calculated source selection")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_out_sel_set($(P),$(R),7) $(PORT)")
}

record(calcout, "$(P)$(R)ITL7") {
  field(ASG, "Reserved")
  field(DESC, "EVR OUT7 set interlock function calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)itl7")
  field(CALC, "A<<7")
  field(OUT, "@timing.proto evre_out_itl_set($(P),$(R),7) $(PORT)")
}

record(bo, "$(P)$(R)itl7"){
  field(DESC, "EVR OUT7 interlock function selection")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)ITL7")
}

record(longout, "$(P)$(R)cmd_out_get7") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read OUT7")
  field(VAL, "0x98") # (0x80 | (reg number=24))
}

record(longout, "$(P)$(R)cmd_out_set7") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to OUT7")
  field(VAL, "0x58")
}

########################################################################
# Timestamp register [51]

record(mbbo, "$(P)$(R)TIMESRC"){
  field(DESC, "EVR timestamp signal source")	
  field(ZRST, "IDLE")
  field(ZRVL, "0")
  field(ONST, "DBUS")
  field(ONVL, "1")
  field(TWST, "EVENT")
  field(TWVL, "2")
  field(THST, "INTERNAL")
  field(THVL, "3")
  field(VAL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_tmstmp_set($(P),$(R)) $(PORT)")
}

record(longin, "$(P)$(R)UTCRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR timestamp UTC field RBV")
  field(EGU, "seconds")
}

record(longin, "$(P)$(R)subsecondRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR timestamp subsecond field RBV")
  field(EGU, "evt_T")
}

record(mbbi, "$(P)$(R)TIMESRCRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR timestamp signal source RBV")	
  field(ZRST, "IDLE")
  field(ZRVL, "0")
  field(ONST, "DBUS")
  field(ONVL, "1")
  field(TWST, "EVENT")
  field(TWVL, "2")
  field(THST, "INTERNAL")
  field(THVL, "3")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_tmstmp_timesrcRBV_intr $(PORT)")
}

record(longout, "$(P)$(R)cmd_tmstmp_get"){
  field(ASG, "Reserved")
  field(DESC, "Command code to read timestamp reg")
  field(VAL, "0xB3")
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_tmstmp_get($(P),$(R)) $(PORT)")
}

record(longout, "$(P)$(R)cmd_tmstmp_set"){
  field(ASG, "Reserved")
  field(DESC, "Command code to write to timestamp reg")
  field(VAL, "0x73")
}

########################################################################
# Timestamp log register [52]

record(bo, "$(P)$(R)stoplog"){
  field(DESC, "EVR stop log command")
  field(ONAM, "ON")
  field(ZNAM, "OFF")
  field(FLNK, "$(P)$(R)stoplogAUX")
}

# initialization by @init
record(calcout, "$(P)$(R)stoplogAUX"){
  field(ASG, "Reserved")
  field(DESC, "Auxiliar var for stoplog")
  field(INPA, "$(P)$(R)stoplog")
  field(CALC, "A << 7")
  field(FLNK, "$(P)$(R)STOPLOG")
}

record(bo, "$(P)$(R)rstlog"){
  field(DESC, "EVR reset log command")
  field(ONAM, "ON")
  field(ZNAM, "OFF")
  field(HIGH, "0.5")
  field(FLNK, "$(P)$(R)RSTLOG")
}

record(bo, "$(P)$(R)pull"){
  field(DESC, "EVR pull from log command")
  field(ONAM, "PULL")
  field(ZNAM, "DO NOTHING")
  field(FLNK, "$(P)$(R)checkPull")
}

record(calcout, "$(P)$(R)checkPull"){
  field(ASG, "Reserved")
  field(DESC, "Validate pull action")
  field(INPA, "$(P)$(R)EMPTY")
  field(INPB, "$(P)$(R)pull")
  field(CALC, "(A = 0) && !(B = 0)")
  field(OOPT, "When Non-zero")
  field(OUT, "$(P)$(R)PULL.PROC")
}

record(calcout, "$(P)$(R)STOPLOG") {
  field(ASG, "Reserved")
  field(DESC, "EVR set stop log calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)stoplog.VAL")
  field(INPB, "$(P)$(R)RSTLOGRBV.VAL")
  field(CALC, "(A<<7)|(B<<6)")
  field(OUT, "@timing.proto evre_log_set($(P),$(R),STOPLOG) $(PORT)")
  field(FLNK, "$(P)$(R)onlyRead")
}

record(calcout, "$(P)$(R)RSTLOG") {
  field(ASG, "Reserved")
  field(DESC, "EVR set reset log calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)stoplogAUX.VAL")
  field(INPB, "$(P)$(R)rstlog.VAL")
  field(CALC, "(A & 128)|(B<<6)")
  field(OUT, "@timing.proto evre_log_set($(P),$(R),RSTLOG) $(PORT)")
  field(FLNK, "$(P)$(R)onlyRead")
}

record(calcout, "$(P)$(R)PULL") {
  field(ASG, "Reserved")
  field(DESC, "EVR set pull log calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)stoplogAUX.VAL")
  field(INPB, "$(P)$(R)RSTLOGRBV.VAL")
  field(INPC, "$(P)$(R)pull.VAL")
  field(CALC, "(A & 128)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evre_log_set($(P),$(R),PULL) $(PORT)")
  field(PRIO, "HIGH")
  field(FLNK, "$(P)$(R)readAndUpdate")
}

record(calcout, "$(P)$(R)LOGCTRL") {
  field(ASG, "Reserved")
  field(DESC, "EVR download stop, reset, and pull")
  field(INPA, "$(P)$(R)stoplog.VAL")
  field(INPB, "$(P)$(R)rstlog.VAL")
  field(INPC, "$(P)$(R)pull.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(longin, "$(P)$(R)LOGCOUNT"){
  field(ASG, "Reserved")
  field(DESC, "EVR number of timestamps in the buffer")
  field(EGU, "timestamps")
}

record(mbbiDirect, "$(P)$(R)LOGCTRLRBV"){
  field(ASG, "Reserved")
  field(DESC, "EVR timestamp log control RBV")
  field(NOBT, "8")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_log_ctrlRBV_intr $(PORT)")
  field(FLNK, "$(P)$(R)STOPLOGRBV")
}

record(bi, "$(P)$(R)STOPLOGRBV"){
  field(ASG, "Reserved")
  field(ONAM, "ON")
  field(ZNAM, "OFF")
  field(DESC, "EVR stop log command RBV")
  field(INP, "$(P)$(R)LOGCTRLRBV.B7")
  field(FLNK, "$(P)$(R)RSTLOGRBV")
}

record(bi, "$(P)$(R)RSTLOGRBV"){
  field(ASG, "Reserved")
  field(ONAM, "ON")
  field(ZNAM, "OFF")
  field(DESC, "EVR reset log command RBV")
  field(INP, "$(P)$(R)LOGCTRLRBV.B6")
  field(FLNK, "$(P)$(R)FULL")
}

record(bi, "$(P)$(R)FULL"){
  field(ASG, "Reserved")
  field(ONAM, "YES")
  field(ZNAM, "NO")
  field(DESC, "EVR timestamp buffer full flag")
  field(INP, "$(P)$(R)LOGCTRLRBV.B1")
  field(FLNK, "$(P)$(R)EMPTY")
}

record(bi, "$(P)$(R)EMPTY"){
  field(ASG, "Reserved")
  field(ONAM, "YES")
  field(ZNAM, "NO")
  field(DESC, "EVR timestamp buffer empty flag")
  field(INP, "$(P)$(R)LOGCTRLRBV.B0")
}

record(longin, "$(P)$(R)LOGUTC"){
  field(ASG, "Reserved")
  field(DESC, "EVR UTC timestamp pulled from log")
  field(EGU, "seconds")
}

record(longin, "$(P)$(R)LOGSUBSEC"){
  field(ASG, "Reserved")
  field(DESC, "EVR subsecond timestamp pulled from log")
  field(EGU, "evt_T")
}

record(longin, "$(P)$(R)LOGEVENT"){
  field(ASG, "Reserved")
  field(DESC, "EVR timestamp event pulled from log")
}

record(longout, "$(P)$(R)onlyRead"){
  field(ASG, "Reserved")
  field(DESC, "Read timestamp and don't update buffers")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_log_get($(P),$(R)) $(PORT)")
  field(FLNK, "$(P)$(R)LOGCTRL")
}

record(longout, "$(P)$(R)readAndUpdate"){
  field(ASG, "Reserved")
  field(DESC, "Read register and update buffers")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_log_get($(P),$(R)) $(PORT)")
  field(PRIO, "HIGH")
  field(FLNK, "$(P)$(R)UTCbuffer")
}

record(compress, "$(P)$(R)UTCbuffer"){
  field(ASG, "Reserved")
  field(DESC, "UTC circular buffer")
  field(EGU, "seconds")
  field(ALG, "Circular Buffer")
  field(NSAM, "1000")
  field(INP, "$(P)$(R)LOGUTC")
  field(FLNK, "$(P)$(R)SUBSECbuffer")
}

record(compress, "$(P)$(R)SUBSECbuffer"){
  field(ASG, "Reserved")
  field(DESC, "SUBSEC circular buffer")
  field(EGU, "evt_T")
  field(ALG, "Circular Buffer")
  field(NSAM, "1000")
  field(INP, "$(P)$(R)LOGSUBSEC")
  field(FLNK, "$(P)$(R)EVENTbuffer")
}

record(compress, "$(P)$(R)EVENTbuffer"){
  field(ASG, "Reserved")
  field(DESC, "Event circular buffer")
  field(ALG, "Circular Buffer")
  field(NSAM, "1000")
  field(INP, "$(P)$(R)LOGEVENT")
  field(FLNK, "$(P)$(R)LOGSOFTCNT")
}

record(calc, "$(P)$(R)LOGSOFTCNT"){
  field(ASG, "Reserved")
  field(DESC, "Software fresh data buffer counter")
  field(EGU, "timestamps")
  field(CALC, "VAL + 1")
  field(FLNK, "$(P)$(R)pullAgain")
}

record(calcout, "$(P)$(R)pullAgain"){
  field(ASG, "Reserved")
  field(DESC, "Pull again decision calc")
  field(INPA, "$(P)$(R)whileNotEmpty.VAL")
  field(CALC, "A")
  field(OOPT, "When Non-zero")
  field(OUT, "$(P)$(R)whileNotEmpty.PROC")
  field(FLNK, "$(P)$(R)LOGCTRL")
}

record(calcout, "$(P)$(R)PeriodicPull"){
  field(ASG, "Reserved")
  field(DESC, "Periodic pull of timestamps")
  field(SCAN, "2 second")
  field(INPA, "$(P)$(R)whileNotEmpty.VAL")
  field(INPB, "$(P)$(R)EMPTY")
  field(CALC, "(A = 0) && (B = 0)")
  field(VAL, "0")
  field(OOPT, "When Non-zero")
  field(OUT, "$(P)$(R)whileNotEmpty.PROC")
}

record(calcout, "$(P)$(R)whileNotEmpty"){
  field(ASG, "Reserved")
  field(DESC, "Flag: pull while buffer is not empty")
  field(INPA, "$(P)$(R)EMPTY")
  field(CALC, "A = 0")
  field(VAL, "0")
  field(OUT, "$(P)$(R)pull PP")
}

record(bo, "$(P)$(R)rstSoftBuff"){
  field(DESC, "Reset software buffers")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(HIGH, "1")
  field(FLNK, "$(P)$(R)rstSoftBuffCalc")
}

record(calcout, "$(P)$(R)rstSoftBuffCalc"){
  field(ASG, "Reserved")
  field(DESC, "Reset software buffers calc")
  field(INPA, "$(P)$(R)rstSoftBuff")
  field(CALC, "A")
  field(OOPT, "When Non-zero")
  field(OUT, "$(P)$(R)rstSoftBuffSeq.PROC")
}

record(sseq, "$(P)$(R)rstSoftBuffSeq"){
  field(ASG, "Reserved")
  field(DESC, "Reset software buffers sequence")
  field(SELM, "All")
  field(DO1, "1")
  field(DO2, "1")
  field(DO3, "1")
  field(DO4, "0")
  field(DO5, "1")
  field(DO6, "1")
  field(DO7, "1")
  field(LNK1, "$(P)$(R)UTCbuffer.RES PP")	# Reset and process UTC buffer. It will pull a -1 when processed.
  field(LNK2, "$(P)$(R)SUBSECbuffer.RES PP")	# Reset and process SUBSEC buffer. It will pull a -1 when processed.
  field(LNK3, "$(P)$(R)EVENTbuffer.RES PP")	# Reset and process EVENT buffer. It will pull a -1 when processed.
  field(LNK4, "$(P)$(R)LOGSOFTCNT")		# Zero soft log count
  field(LNK5, "$(P)$(R)UTCbuffer.RES")	# Reset buffer again, and do not process, to remove -1.
  field(LNK6, "$(P)$(R)SUBSECbuffer.RES")	# Reset buffer again, and do not process, to remove -1.
  field(LNK7, "$(P)$(R)EVENTbuffer.RES")	# Reset buffer again, and do not process, to remove -1.
  field(WAIT1, "Wait")
  field(WAIT2, "Wait")
  field(WAIT3, "Wait")
  field(WAIT4, "Wait")
  field(WAIT5, "Wait")
  field(Wait6, "Wait")
}

record(longout, "$(P)$(R)cmd_log_get"){
  field(ASG, "Reserved")
  field(DESC, "Timestamp log reg read command code")
  field(VAL, "0xB4")
  field(SCAN, "1 second")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evre_log_get($(P),$(R)) $(PORT)")
}

record(longout, "$(P)$(R)cmd_log_set"){
  field(ASG, "Reserved")
  field(DESC, "Timestamp log reg write command code")
  field(VAL, "0x74")
}

########################################################################
# Digital input 0 [53]

record(longout, "$(P)$(R)digev0") {
  field(DESC, "EVR digital input 0 event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evgre_diginp_ev_set($(P),$(R),0) $(PORT)")
}

record(bo, "$(P)$(R)digen0") {
  field(DESC, "EVR digital input 0 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)DIGEN0")
}

record(bo, "$(P)$(R)digpol0") {
  field(DESC, "EVR digital input 0 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)DIGPOL0")
}

record(bo, "$(P)$(R)digtime0") {
  field(DESC, "EVR dig. input 0 event timestamp enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)DIGTIME0")
}

record(calcout, "$(P)$(R)DIGEN0") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 0 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen0.VAL")
  field(INPB, "$(P)$(R)digpol0RBV.VAL")
  field(INPC, "$(P)$(R)digtime0RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),0,DIGEN) $(PORT)")
  field(FLNK, "$(P)$(R)digept0")
}

record(calcout, "$(P)$(R)DIGPOL0") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 0 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen0RBV.VAL")
  field(INPB, "$(P)$(R)digpol0.VAL")
  field(INPC, "$(P)$(R)digtime0RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),0,DIGPOL) $(PORT)")
  field(FLNK, "$(P)$(R)digept0")
}

record(calcout, "$(P)$(R)DIGTIME0") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 0 set timestamp calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen0RBV.VAL")
  field(INPB, "$(P)$(R)digpol0RBV.VAL")
  field(INPC, "$(P)$(R)digtime0.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),0,DIGTIME) $(PORT)")
  field(FLNK, "$(P)$(R)digept0")
}

record(calcout, "$(P)$(R)digept0") {
  field(ASG, "Reserved")
  field(DESC, "EVR dig.inp. 0 download en, pol and time")
  field(INPA, "$(P)$(R)digen0.VAL")
  field(INPB, "$(P)$(R)digpol0.VAL")
  field(INPC, "$(P)$(R)digtime0.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)digept0RBV") {
  field(ASG, "Reserved")
  field(DESC, "DIGINP0 en, pol, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evgre_diginp0_intr $(PORT)")
  field(FLNK, "$(P)$(R)digtime0RBV")
}

record(bi, "$(P)$(R)digtime0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 0 timestamping sts")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)digept0RBV.B0")
  field(FLNK, "$(P)$(R)digpol0RBV")
}

record(bi, "$(P)$(R)digpol0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 0 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)digept0RBV.B1")
  field(FLNK, "$(P)$(R)digen0RBV")
}

record(bi, "$(P)$(R)digen0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 0 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)digept0RBV.B2")
}

record(longin, "$(P)$(R)digev0RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 0 event RBV")
}

record(longout, "$(P)$(R)cmd_diginp_set0") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to DIGINP0")
  field(VAL, "0x75") # (0x40 | reg number=1)
}

record(longout, "$(P)$(R)cmd_diginp_get0") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read DIGINP0")
  field(VAL, "0xB5") # (0x80 | reg number=1)
}

########################################################################
# Digital input 1 [54]

record(longout, "$(P)$(R)digev1") {
  field(DESC, "EVR digital input 1 event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evgre_diginp_ev_set($(P),$(R),1) $(PORT)")
}

record(bo, "$(P)$(R)digen1") {
  field(DESC, "EVR digital input 1 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)DIGEN1")
}

record(bo, "$(P)$(R)digpol1") {
  field(DESC, "EVR digital input 1 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)DIGPOL1")
}

record(bo, "$(P)$(R)digtime1") {
  field(DESC, "EVR dig. input 1 event timestamp enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)DIGTIME1")
}

record(calcout, "$(P)$(R)DIGEN1") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 1 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen1.VAL")
  field(INPB, "$(P)$(R)digpol1RBV.VAL")
  field(INPC, "$(P)$(R)digtime1RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),1,DIGEN) $(PORT)")
  field(FLNK, "$(P)$(R)digept1")
}

record(calcout, "$(P)$(R)DIGPOL1") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 1 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen1RBV.VAL")
  field(INPB, "$(P)$(R)digpol1.VAL")
  field(INPC, "$(P)$(R)digtime1RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),1,DIGPOL) $(PORT)")
  field(FLNK, "$(P)$(R)digept1")
}

record(calcout, "$(P)$(R)DIGTIME1") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 1 set timestamp calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen1RBV.VAL")
  field(INPB, "$(P)$(R)digpol1RBV.VAL")
  field(INPC, "$(P)$(R)digtime1.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),1,DIGTIME) $(PORT)")
  field(FLNK, "$(P)$(R)digept1")
}

record(calcout, "$(P)$(R)digept1") {
  field(ASG, "Reserved")
  field(DESC, "EVR dig.inp. 1 download en, pol and time")
  field(INPA, "$(P)$(R)digen1.VAL")
  field(INPB, "$(P)$(R)digpol1.VAL")
  field(INPC, "$(P)$(R)digtime1.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)digept1RBV") {
  field(ASG, "Reserved")
  field(DESC, "DIGINP1 en, pol, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evgre_diginp1_intr $(PORT)")
  field(FLNK, "$(P)$(R)digtime1RBV")
}

record(bi, "$(P)$(R)digtime1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 1 timestamping sts")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)digept1RBV.B0")
  field(FLNK, "$(P)$(R)digpol1RBV")
}

record(bi, "$(P)$(R)digpol1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 1 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)digept1RBV.B1")
  field(FLNK, "$(P)$(R)digen1RBV")
}

record(bi, "$(P)$(R)digen1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 1 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)digept1RBV.B2")
}

record(longin, "$(P)$(R)digev1RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 1 event RBV")
}

record(longout, "$(P)$(R)cmd_diginp_set1") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to DIGINP1")
  field(VAL, "0x76") # (0x40 | reg number=1)
}

record(longout, "$(P)$(R)cmd_diginp_get1") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read DIGINP1")
  field(VAL, "0xB6") # (0x80 | reg number=1)
}

########################################################################
# Digital input 2 [55]

record(longout, "$(P)$(R)digev2") {
  field(DESC, "EVR digital input 2 event code")
  field(DRVH, "255")
  field(DRVL, "0")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evgre_diginp_ev_set($(P),$(R),2) $(PORT)")
}

record(bo, "$(P)$(R)digen2") {
  field(DESC, "EVR digital input 2 enable")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)DIGEN2")
}

record(bo, "$(P)$(R)digpol2") {
  field(DESC, "EVR digital input 2 polarity")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(FLNK, "$(P)$(R)DIGPOL2")
}

record(bo, "$(P)$(R)digtime2") {
  field(DESC, "EVR dig. input 2 event timestamp enable")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(FLNK, "$(P)$(R)DIGTIME2")
}

record(calcout, "$(P)$(R)DIGEN2") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 2 set enable calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen2.VAL")
  field(INPB, "$(P)$(R)digpol2RBV.VAL")
  field(INPC, "$(P)$(R)digtime2RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),2,DIGEN) $(PORT)")
  field(FLNK, "$(P)$(R)digept2")
}

record(calcout, "$(P)$(R)DIGPOL2") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 2 set polarity calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen2RBV.VAL")
  field(INPB, "$(P)$(R)digpol2.VAL")
  field(INPC, "$(P)$(R)digtime2RBV.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),2,DIGPOL) $(PORT)")
  field(FLNK, "$(P)$(R)digept2")
}

record(calcout, "$(P)$(R)DIGTIME2") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 2 set timestamp calc")
  field(DTYP, "stream")
  field(INPA, "$(P)$(R)digen2RBV.VAL")
  field(INPB, "$(P)$(R)digpol2RBV.VAL")
  field(INPC, "$(P)$(R)digtime2.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
  field(OUT, "@timing.proto evgre_diginp_ept_set($(P),$(R),2,DIGTIME) $(PORT)")
  field(FLNK, "$(P)$(R)digept2")
}

record(calcout, "$(P)$(R)digept2") {
  field(ASG, "Reserved")
  field(DESC, "EVR dig.inp. 2 download en, pol and time")
  field(INPA, "$(P)$(R)digen2.VAL")
  field(INPB, "$(P)$(R)digpol2.VAL")
  field(INPC, "$(P)$(R)digtime2.VAL")
  field(CALC, "(A<<7)|(B<<6)|(C<<5)")
}

record(mbbiDirect, "$(P)$(R)digept2RBV") {
  field(ASG, "Reserved")
  field(DESC, "DIGINP2 en, pol, and timestamp RBV")
  field(NOBT, "8")
  field(SHFT, "5")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evgre_diginp2_intr $(PORT)")
  field(FLNK, "$(P)$(R)digtime2RBV")
}

record(bi, "$(P)$(R)digtime2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 2 timestamping sts")
  field(ZNAM, "NOT TIMESTAMPED")
  field(ONAM, "TIMESTAMPED")
  field(INP, "$(P)$(R)digept2RBV.B0")
  field(FLNK, "$(P)$(R)digpol2RBV")
}

record(bi, "$(P)$(R)digpol2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 2 polarity status")
  field(ZNAM, "NORMAL")
  field(ONAM, "INVERTED")
  field(INP, "$(P)$(R)digept2RBV.B1")
  field(FLNK, "$(P)$(R)digen2RBV")
}

record(bi, "$(P)$(R)digen2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 2 enable status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(INP, "$(P)$(R)digept2RBV.B2")
}

record(longin, "$(P)$(R)digev2RBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR digital input 2 event RBV")
}

record(longout, "$(P)$(R)cmd_diginp_set2") {
  field(ASG, "Reserved")
  field(DESC, "Command code to write to DIGINP2")
  field(VAL, "0x77") # (0x40 | reg number=1)
}

record(longout, "$(P)$(R)cmd_diginp_get2") {
  field(ASG, "Reserved")
  field(DESC, "Command code to read DIGINP2")
  field(VAL, "0xB7") # (0x80 | reg number=1)
}

########################################################################
# Firmware Version [62]

record(longin, "$(P)$(R)FRMVERSIONA"){
  #field(ASG, "Reserved")
  field(DESC, "EVO firmware version")
  field(DTYP, "stream")
  field(INP, "@timing.proto frmvrs_get($(P),$(R)) $(PORT)")
}

record(longin, "$(P)$(R)FRMVERSIONB"){
  #field(ASG, "Reserved")
  field(DESC, "EVO firmware version")
  field(DTYP, "stream")
  field(INP, "@timing.proto frmvrs_get($(P),$(R)) $(PORT)")
}

record(longin, "$(P)$(R)FRMVERSIONC"){
  #field(ASG, "Reserved")
  field(DESC, "EVO firmware version")
  field(DTYP, "stream")
  field(INP, "@timing.proto frmvrs_get($(P),$(R)) $(PORT)")
}

record(calcout, "$(P)$(R)cmd_frmvrs_get"){
  field(ASG, "Reserved")
  field(DESC, "Firmware version read command code")
  field(VAL, "0xBE")
}

########################################################################
# Configuration Register [63]

record(longin, "$(P)$(R)alive") {
  field(ASG, "Reserved")
  field(DESC, "EVR alive")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_conf_alive_intr $(PORT)")
  field(FLNK, "$(P)$(R)statdevcalc")
}

record(mbbi, "$(P)$(R)clkmodeRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR clock mode status")
  field(NOBT, "6")
  field(ZRVL, "11")
  field(ZRST, "60-62.5 MHz")
  field(ONVL, "12")
  field(ONST, "63-77 MHz")
  field(TWVL, "13")
  field(TWST, "77.5-91.5 MHz")
  field(THVL, "14")
  field(THST, "92-106 MHz")
  field(FRVL, "15")
  field(FRST, "106-120.5 MHz")
  field(FVVL, "16")
  field(FVST, "121-135 MHz")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_conf_clkmode_intr $(PORT)")
}

record(mbbi, "$(P)$(R)funselRBV") {
  field(ASG, "Reserved")
  field(DESC, "EVR function select status")
  field(NOBT, "6")
  field(ZRVL, "16")
  field(ZRST, "FOUT")
  field(ONVL, "17")
  field(ONST, "EVR")
  field(TWVL, "18")
  field(TWST, "EVG")
  field(THVL, "32")
  field(THST, "EVE")
  field(SCAN, "I/O Intr")
  field(DTYP, "stream")
  field(INP, "@timing.proto evre_conf_funsel_intr $(PORT)")
}

record(mbbo, "$(P)$(R)funsel") {
  field(DESC, "STD-EVO configuration as EVR")
  field(ZRVL, "16")
  field(ZRST, "FOUT")
  field(ONVL, "17")
  field(ONST, "EVR")
  field(TWVL, "18")
  field(TWST, "EVG")
  field(THVL, "32")
  field(THST, "EVE")
  field(DTYP, "stream")
  field(VAL, "1")
  field(OUT, "@timing.proto evr_conf_funsel_set($(P),$(R)) $(PORT)")
}

record(mbbo, "$(P)$(R)clkmode"){
  field(DESC, "EVE clock mode")
  field(ZRVL, "11")
  field(ZRST, "11")
  field(ONVL, "12")
  field(ONST, "12")
  field(TWVL, "13")
  field(TWST, "13")
  field(THVL, "14")
  field(THST, "15")
  field(FRVL, "15")
  field(FRST, "15")
  field(FVVL, "16")
  field(FVST, "16")
  field(VAL, "5")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evr_conf_clk_set($(P),$(R)) $(PORT)")
}

record(longout, "$(P)$(R)cmd_conf_get"){
  field(ASG, "Reserved")
  field(DESC, "Configuration reg read command code")
  field(VAL, "0xBF")
  field(DTYP, "stream")
  field(SCAN, "1 second")
  field(OUT, "@timing.proto evr_conf_get($(P),$(R)) $(PORT)")
}

record(longout, "$(P)$(R)cmd_conf_set") {
  field(ASG, "Reserved")
  field(DESC, "Configuration reg write command code")
  field(VAL, "0x7F")
}

########################################################################
# Write all configuration registers
record(bo, "$(P)$(R)download") {
  field(DESC, "EVR download")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
}

record(bo, "$(P)$(R)downloadT") {
  field(DESC, "EVR download trigger")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evr_download($(P),$(R)) $(PORT)")
}

record(bo, "$(P)$(R)uploadT") {
  field(DESC, "EVR upload trigger")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(HIGH, "0.5")
  field(FLNK, "$(P)$(R)uploadCalc")
}

record(calcout, "$(P)$(R)uploadCalc"){
  field(ASG, "Reserved")
  field(DESC, "EVR upload trigger calc")
  field(INPA, "$(P)$(R)uploadT")
  field(CALC, "A")
  field(OOPT, "When Non-zero")
  field(DTYP, "stream")
  field(OUT, "@timing.proto evr_upload($(P),$(R)) $(PORT)")
}

record(calc, "$(P)$(R)statdevcalc") {
  field(ASG, "Reserved")
  field(DESC, "EVR device status calc")
  field(INPA, "$(P)$(R)alive")
  field(CALC, "A=0?0:1")
  field(FLNK, "$(P)$(R)statdev")
}

record(bi, "$(P)$(R)statdev") {
  field(ASG, "Reserved")
  field(DESC, "EVR device status")
  field(ZNAM, "WAITING")
  field(ONAM, "RUNNING")
  field(INP, "$(P)$(R)statdevcalc")
}

record(bi, "$(P)$(R)network") {
  field(ASG, "Reserved")
  field(DESC, "EVR network status")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
}

record(bo, "$(P)$(R)SAVE"){
  field(DESC, "EVR manual Save settings command")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
  field(FLNK, "$(P)$(R)save_T")
}

record(calc, "$(P)$(R)save_T"){
  field(DESC, "EVR manual Save trigger")
  field(INPA, "$(P)$(R)SAVE.VAL")
  field(CALC, "(A > 0) ? (VAL+1) : VAL")
  field(VAL, "0")
}
